<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèúÔ∏è Desert Tribe - Camel Racing</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: linear-gradient(to bottom, #f4a460 0%, #daa520 50%, #d2691e 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    .container { max-width: 1400px; margin: 0 auto; padding: 20px; text-align: center; }
    .title {
      color: #fff;
      text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
      margin: 40px 0;
      animation: fadeIn 1s ease-in;
    }
    .title h1 { font-size: 3em; letter-spacing: 3px; }
    .title p { font-size: 1.2em; color: #ffe4b5; margin-top: 10px; }
    .village {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .tent {
      background: rgba(139, 69, 19, 0.6);
      border: 3px solid #654321;
      border-radius: 15px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }
    .tent:hover {
      transform: translateY(-5px);
      background: rgba(139, 69, 19, 0.9);
      box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
    }
    .tent h2 { color: #FFD700; font-size: 1.8em; margin-bottom: 10px; }
    .tent p { color: #FFF; font-size: 1em; }
    button {
      background: linear-gradient(45deg, #32CD32, #228B22);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 1.2em;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px;
    }
    button:hover { transform: scale(1.05); }
    .race-container {
      width: 100%;
      height: 700px;
      overflow-x: auto;
      overflow-y: hidden;
      border: 4px solid #654321;
      border-radius: 10px;
      margin: 20px auto;
      background: #000;
      position: relative;
      scroll-behavior: smooth;
    }
    canvas {
      display: block;
      background: #f0e68c;
    }
    #progressBar {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 600px;
      height: 40px;
      background: rgba(0,0,0,0.9);
      border: 3px solid #FFD700;
      border-radius: 20px;
      overflow: hidden;
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    #progressFill {
      height: 100%;
      background: linear-gradient(90deg, #32CD32, #FFD700);
      width: 0%;
      transition: width 0.1s;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 10px;
      color: #000;
      font-weight: bold;
      font-size: 1.1em;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">
      <h1>üèúÔ∏è DESERT TRIBE üê™</h1>
      <p>Welcome to the Ancient Camel Racing Grounds</p>
    </div>

    <div class="village">
      <div class="tent" onclick="startRace()">
        <h2>Racing Arena</h2>
        <p>Epic 10km desert race!</p>
      </div>
      <div class="tent">
        <h2>Camel Stable</h2>
        <p>Meet the camels</p>
      </div>
      <div class="tent">
        <h2>Betting Tent</h2>
        <p>Place your bets</p>
      </div>
      <div class="tent">
        <h2>Trader's Market</h2>
        <p>Buy gear</p>
      </div>
    </div>

    <div class="race-container" style="display: none;" id="raceContainer">
      <canvas id="raceCanvas"></canvas>
    </div>

    <div id="progressBar" style="display: none;">
      <div id="progressFill">0%</div>
    </div>

    <div id="raceStatus" style="color: #32CD32; font-size: 1.5em; margin: 20px 0; display: none;"></div>
    <button onclick="location.reload()" style="display: none;" id="resetBtn">üîÑ NEW RACE</button>
  </div>

  <script>
    const CAMELS = [
      { id: 0, name: 'Desert Storm', baseSpeed: 3.5, color: '#8B4513', jockey: 'üë≥' },
      { id: 1, name: 'Sand Runner', baseSpeed: 3.2, color: '#D2691E', jockey: 'üßî' },
      { id: 2, name: 'Golden Wind', baseSpeed: 3.8, color: '#DAA520', jockey: 'üë®' },
      { id: 3, name: 'Oasis King', baseSpeed: 3.3, color: '#CD853F', jockey: 'üßë' },
      { id: 4, name: 'Dune Dancer', baseSpeed: 3.6, color: '#DEB887', jockey: 'üë¥' },
      { id: 5, name: 'Mirage Master', baseSpeed: 3.9, color: '#F4A460', jockey: 'üßì' },
      { id: 6, name: 'Swift Sands', baseSpeed: 3.4, color: '#BC8F8F', jockey: 'üë≤' },
      { id: 7, name: 'Thunder Hoof', baseSpeed: 3.1, color: '#A0522D', jockey: 'üßï' },
      { id: 8, name: 'Lightning Bolt', baseSpeed: 4.0, color: '#D2B48C', jockey: 'üë±' }
    ];

    const RaceEngine = {
      canvas: null,
      ctx: null,
      container: null,
      camels: [],
      raceInProgress: false,
      winner: null,
      raceLength: 6000,
      obstacles: [],

      init() {
        this.container = document.getElementById('raceContainer');
        this.container.style.display = 'block';
        this.canvas = document.getElementById('raceCanvas');
        this.canvas.width = this.raceLength + 500;
        this.canvas.height = 700;
        this.ctx = this.canvas.getContext('2d');

        this.camels = CAMELS.map(c => ({
          ...c,
          x: 100,
          y: 250 + (Math.random() * 200),
          speed: c.baseSpeed,
          stamina: 100,
          distance: 0
        }));

        this.generateObstacles();
        this.drawTrack();
      },

      generateObstacles() {
        this.obstacles = [];
        for (let i = 0; i < 25; i++) {
          this.obstacles.push({
            x: 300 + Math.random() * (this.raceLength - 500),
            y: 200 + Math.random() * 400,
            type: Math.random() > 0.5 ? 'cactus' : 'rock',
            width: 30,
            height: 40
          });
        }
      },

      drawTrack() {
        const ctx = this.ctx;
        const canvas = this.canvas;

        // Sky gradient
        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.4);
        gradient.addColorStop(0, '#87CEEB');
        gradient.addColorStop(1, '#F4A460');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height * 0.4);

        // Wavy sand dunes - upper layer
        ctx.fillStyle = '#F4A460';
        ctx.beginPath();
        ctx.moveTo(0, canvas.height * 0.4);
        for (let x = 0; x < canvas.width; x += 20) {
          const y = canvas.height * 0.4 + Math.sin(x * 0.01) * 40 + 60;
          ctx.lineTo(x, y);
        }
        ctx.lineTo(canvas.width, canvas.height);
        ctx.lineTo(0, canvas.height);
        ctx.fill();

        // Wavy sand dunes - lower layer
        ctx.fillStyle = '#D2691E';
        ctx.beginPath();
        ctx.moveTo(0, canvas.height * 0.6);
        for (let x = 0; x < canvas.width; x += 20) {
          const y = canvas.height * 0.6 + Math.sin(x * 0.015 + 2) * 30 + 40;
          ctx.lineTo(x, y);
        }
        ctx.lineTo(canvas.width, canvas.height);
        ctx.lineTo(0, canvas.height);
        ctx.fill();

        // Distance markers
        ctx.fillStyle = 'rgba(255,255,255,0.3)';
        ctx.font = 'bold 16px Courier';
        for (let i = 0; i <= this.raceLength; i += 500) {
          ctx.fillRect(i, 0, 2, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillText(`${(i/600).toFixed(1)}km`, i + 5, 30);
          ctx.fillStyle = 'rgba(255,255,255,0.3)';
        }

        // Draw obstacles
        this.obstacles.forEach(obs => {
          if (obs.type === 'cactus') {
            ctx.fillStyle = '#228B22';
            ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
            ctx.fillRect(obs.x - 10, obs.y + 10, 10, 15);
            ctx.fillRect(obs.x + obs.width, obs.y + 10, 10, 15);
          } else {
            ctx.fillStyle = '#808080';
            ctx.beginPath();
            ctx.arc(obs.x + obs.width/2, obs.y + obs.height/2, obs.width/2, 0, Math.PI * 2);
            ctx.fill();
          }
        });

        // Finish line
        ctx.fillStyle = '#000';
        ctx.fillRect(this.raceLength, 0, 100, canvas.height);

        for (let i = 0; i < 12; i++) {
          for (let j = 0; j < 2; j++) {
            if ((i + j) % 2 === 0) {
              ctx.fillStyle = '#fff';
              ctx.fillRect(this.raceLength + (j * 50), i * 60, 50, 60);
            }
          }
        }
      },

      drawCamel(camel) {
        const ctx = this.ctx;

        ctx.fillStyle = camel.color;
        ctx.fillRect(camel.x, camel.y, 50, 35);
        ctx.fillRect(camel.x + 40, camel.y - 18, 18, 28);

        ctx.beginPath();
        ctx.arc(camel.x + 18, camel.y + 5, 13, Math.PI, 0);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(camel.x + 35, camel.y + 5, 10, Math.PI, 0);
        ctx.fill();

        ctx.fillRect(camel.x + 10, camel.y + 35, 5, 18);
        ctx.fillRect(camel.x + 22, camel.y + 35, 5, 18);
        ctx.fillRect(camel.x + 35, camel.y + 35, 5, 18);
        ctx.fillRect(camel.x + 47, camel.y + 35, 5, 18);

        ctx.font = '28px Arial';
        ctx.fillText(camel.jockey, camel.x + 20, camel.y + 18);

        ctx.fillStyle = '#000';
        ctx.font = 'bold 11px Courier';
        ctx.fillText(camel.name, camel.x, camel.y - 25);
      },

      startRace() {
        this.raceInProgress = true;
        document.getElementById('progressBar').style.display = 'block';
        this.animate();
      },

      animate() {
        if (!this.raceInProgress) return;

        this.drawTrack();

        let raceFinished = false;
        let leadDistance = 0;

        this.camels.forEach(camel => {
          // Speed variation
          camel.speed = camel.baseSpeed + (Math.random() - 0.5) * 1.5;

          // Stamina system
          camel.stamina -= 0.08;
          if (camel.stamina < 70) camel.speed *= 0.97;
          if (camel.stamina < 40) camel.speed *= 0.93;
          if (camel.stamina < 20) camel.speed *= 0.88;

          // Random speed bursts
          if (Math.random() > 0.985) camel.speed *= 1.6;

          // Obstacle collision
          this.obstacles.forEach(obs => {
            if (Math.abs(camel.x - obs.x) < 40 && Math.abs(camel.y - obs.y) < 40) {
              camel.speed *= 0.7;
            }
          });

          // Vertical bobbing
          camel.y += (Math.random() - 0.5) * 2;
          camel.y = Math.max(200, Math.min(550, camel.y));

          // Move forward
          camel.distance += camel.speed;
          camel.x = camel.distance;

          this.drawCamel(camel);

          if (camel.distance > leadDistance) leadDistance = camel.distance;

          // Check for finish
          if (camel.x >= this.raceLength && !this.winner) {
            this.winner = camel;
            raceFinished = true;
          }
        });

        // Update progress bar
        const progress = Math.min(100, (leadDistance / this.raceLength) * 100);
        document.getElementById('progressFill').style.width = progress + '%';
        document.getElementById('progressFill').textContent = Math.floor(progress) + '%';

        // Auto-scroll to follow leader
        const scrollPos = Math.max(0, leadDistance - 300);
        this.container.scrollLeft = scrollPos;

        if (raceFinished) {
          this.finishRace();
        } else {
          requestAnimationFrame(() => this.animate());
        }
      },

      finishRace() {
        this.raceInProgress = false;

        document.getElementById('raceStatus').style.display = 'block';
        document.getElementById('raceStatus').innerHTML = `
          üèÜ <span style="color: #FFD700;">${this.winner.name}</span> WINS THE 10KM RACE! üèÜ<br>
          <span style="font-size: 0.8em;">Jockey: ${this.winner.jockey}</span>
        `;

        document.getElementById('resetBtn').style.display = 'block';

        setTimeout(() => {
          document.getElementById('progressBar').style.display = 'none';
        }, 2000);
      }
    };

    function startRace() {
      document.querySelector('.village').style.display = 'none';
      document.querySelector('.title').style.display = 'none';
      RaceEngine.init();
      setTimeout(() => RaceEngine.startRace(), 1000);
    }
  </script>
</body>
</html>

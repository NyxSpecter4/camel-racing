<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèúÔ∏è Dune Rush - Camel Racing</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: linear-gradient(to bottom, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #fff;
      overflow-x: hidden;
    }
    .container { max-width: 1400px; margin: 0 auto; padding: 20px; text-align: center; }

    .title {
      color: #FFD700;
      text-shadow: 0 0 20px #FF8C00;
      margin: 40px 0;
      animation: fadeIn 1s;
    }
    .title h1 { font-size: 3em; letter-spacing: 5px; }

    button {
      background: linear-gradient(135deg, #FFD700, #FF8C00);
      color: #000;
      border: none;
      padding: 20px 40px;
      font-size: 1.3em;
      font-weight: bold;
      border-radius: 12px;
      cursor: pointer;
      margin: 10px;
      transition: all 0.3s;
    }
    button:hover { transform: scale(1.05); }

    .regions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .region-card {
      background: linear-gradient(135deg, rgba(139,69,19,0.5), rgba(101,67,33,0.5));
      border: 3px solid #654321;
      border-radius: 15px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .region-card:hover {
      transform: translateY(-5px);
      border-color: #FFD700;
      box-shadow: 0 10px 30px rgba(255,215,0,0.3);
    }

    .region-card h2 { color: #FFD700; font-size: 2em; margin-bottom: 15px; }
    .region-card p { color: #FFF; font-size: 1.1em; margin: 8px 0; }

    .race-view {
      display: none;
    }

    .race-viewport {
      width: 100%;
      height: 70vh;
      border: 4px solid #FF8C00;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
      background: #000;
    }

    canvas { position: absolute; top: 0; left: 0; }

    .ui-overlay {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      z-index: 10;
      pointer-events: none;
    }

    .player-tag {
      background: rgba(0,0,0,0.8);
      border: 2px solid #FFD700;
      border-radius: 20px;
      padding: 10px 20px;
      display: inline-block;
      font-size: 1.1em;
    }

    .progress-bar {
      background: rgba(0,0,0,0.8);
      border: 2px solid #FFD700;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
    }

    .progress-fill-container {
      width: 100%;
      height: 30px;
      background: rgba(0,0,0,0.5);
      border: 2px solid #FFD700;
      border-radius: 15px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #32CD32, #FFD700);
      width: 0%;
      transition: width 0.1s;
    }

    .positions-list {
      background: rgba(0,0,0,0.8);
      border: 2px solid #FFD700;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      max-height: 250px;
      overflow-y: auto;
    }

    .position-item {
      display: flex;
      justify-content: space-between;
      padding: 8px;
      margin: 5px 0;
      background: rgba(139,69,19,0.3);
      border-radius: 5px;
    }

    .position-item.me {
      border: 2px solid #FFD700;
      background: rgba(255,215,0,0.2);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">
      <h1>üèúÔ∏è DUNE RUSH</h1>
      <p style="font-size: 1.3em; color: #FF8C00;">Epic Camel Racing</p>
    </div>

    <!-- Region Selection -->
    <div id="regionSelect" class="regions">
      <div class="region-card" onclick="startRace('canyon')">
        <h2>üèîÔ∏è CANYON RUN</h2>
        <p>üìè 5km race</p>
        <p>üåÑ Mountain valleys</p>
        <p>‚ö° Quick race (2 min)</p>
      </div>

      <div class="region-card" onclick="startRace('desert')">
        <h2>üèúÔ∏è DESERT CROSSING</h2>
        <p>üìè 15km race</p>
        <p>üåÖ Epic dunes</p>
        <p>‚ö° Medium race (5 min)</p>
      </div>

      <div class="region-card" onclick="startRace('mountain')">
        <h2>‚õ∞Ô∏è MOUNTAIN PASS</h2>
        <p>üìè 30km race</p>
        <p>üèîÔ∏è Tall peaks</p>
        <p>‚ö° Epic marathon (10 min)</p>
      </div>
    </div>

    <!-- Race View -->
    <div id="raceView" class="race-view">
      <div class="race-viewport" id="viewport">
        <canvas id="raceCanvas"></canvas>
        <div class="ui-overlay">
          <div class="player-tag">
            üéØ YOUR CAMEL: <span id="yourCamel"></span>
          </div>
        </div>
      </div>

      <div class="progress-bar">
        <div style="color: #FFD700; margin-bottom: 5px;">Race Progress</div>
        <div class="progress-fill-container">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
          <span style="color: #FFD700;">Position: <strong id="myPosition">-</strong></span>
          <span style="color: #32CD32;"><strong id="distanceText">0.0km</strong> / <span id="totalDistance">5km</span></span>
        </div>
      </div>

      <div class="positions-list">
        <h3 style="color: #FFD700; margin-bottom: 10px;">üèÜ LIVE POSITIONS</h3>
        <div id="positionsList"></div>
      </div>

      <div id="raceResult" style="display: none; margin: 20px 0;">
        <h2 id="resultText" style="color: #FFD700; font-size: 2.5em; margin-bottom: 20px;"></h2>
        <button onclick="location.reload()" style="font-size: 1.5em; padding: 25px 50px;">üîÑ NEW RACE</button>
      </div>
    </div>
  </div>

  <script>
    const CAMELS = [
      { id: 0, name: 'Desert Storm', color: '#8B4513', jockey: 'üë≥' },
      { id: 1, name: 'Sand Runner', color: '#D2691E', jockey: 'üßî' },
      { id: 2, name: 'Golden Wind', color: '#DAA520', jockey: 'üë®' },
      { id: 3, name: 'Oasis King', color: '#CD853F', jockey: 'üßë' },
      { id: 4, name: 'Dune Dancer', color: '#DEB887', jockey: 'üë¥' },
      { id: 5, name: 'Mirage Master', color: '#F4A460', jockey: 'üßì' },
      { id: 6, name: 'Swift Sands', color: '#BC8F8F', jockey: 'üë≤' },
      { id: 7, name: 'Thunder Hoof', color: '#A0522D', jockey: 'üßï' },
      { id: 8, name: 'Lightning Bolt', color: '#D2B48C', jockey: 'üë±' }
    ];

    const REGIONS = {
      canyon: { name: 'Canyon Run', length: 5000, emoji: 'üèîÔ∏è' },
      desert: { name: 'Desert Crossing', length: 15000, emoji: 'üèúÔ∏è' },
      mountain: { name: 'Mountain Pass', length: 30000, emoji: '‚õ∞Ô∏è' }
    };

    let selectedRegion = null;
    let myCamelId = null;

    function startRace(region) {
      selectedRegion = region;
      myCamelId = Math.floor(Math.random() * CAMELS.length);

      document.getElementById('regionSelect').style.display = 'none';
      document.querySelector('.title').style.display = 'none';
      document.getElementById('raceView').style.display = 'block';

      const myCamel = CAMELS[myCamelId];
      document.getElementById('yourCamel').textContent = `${myCamel.jockey} ${myCamel.name}`;
      document.getElementById('totalDistance').textContent = `${REGIONS[region].length/1000}km`;

      RaceEngine.init(region);
    }

    const RaceEngine = {
      canvas: null,
      ctx: null,
      viewport: null,
      camels: [],
      myCamel: null,
      raceLength: 5000,
      cameraX: 0,
      lastUpdate: 0,
      running: false,

      init(region) {
        this.raceLength = REGIONS[region].length;
        this.viewport = document.getElementById('viewport');
        this.canvas = document.getElementById('raceCanvas');
        this.canvas.width = this.raceLength + 2000;
        this.canvas.height = this.viewport.clientHeight;
        this.ctx = this.canvas.getContext('2d');

        // ALL CAMELS GET COMPLETELY RANDOM STATS!
        this.camels = CAMELS.map((c, i) => ({
          ...c,
          x: 100,
          y: 80 + (i * 65),
          distance: 0,

          // TRULY RANDOM - NO PATTERNS!
          baseSpeed: 2.5 + Math.random() * 1.5,
          speedVariation: Math.random(),
          stamina: 100,
          maxStamina: 80 + Math.random() * 40,
          staminaDrain: 0.015 + Math.random() * 0.02,
          form: Math.random(),
          consistency: Math.random(),

          isMe: i === myCamelId
        }));

        this.myCamel = this.camels[myCamelId];
        this.running = true;
        this.lastUpdate = performance.now();

        setTimeout(() => this.animate(), 500);
      },

      drawScene() {
        const ctx = this.ctx;
        const canvas = this.canvas;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Sky
        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.45);
        gradient.addColorStop(0, '#87CEEB');
        gradient.addColorStop(0.5, '#B0E0E6');
        gradient.addColorStop(1, '#F4A460');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height * 0.45);

        // Mountains
        ctx.fillStyle = '#8B7355';
        for (let i = 0; i < 15; i++) {
          const x = i * 1000 - 200;
          ctx.beginPath();
          ctx.moveTo(x, canvas.height * 0.45);
          ctx.lineTo(x + 500, 40 + Math.sin(i) * 30);
          ctx.lineTo(x + 1000, canvas.height * 0.45);
          ctx.closePath();
          ctx.fill();

          // Snow peaks
          ctx.fillStyle = '#FFF';
          ctx.beginPath();
          ctx.moveTo(x + 400, 140);
          ctx.lineTo(x + 500, 40 + Math.sin(i) * 30);
          ctx.lineTo(x + 600, 140);
          ctx.closePath();
          ctx.fill();
          ctx.fillStyle = '#8B7355';
        }

        // Ground
        ctx.fillStyle = '#D2691E';
        ctx.fillRect(0, canvas.height * 0.45, canvas.width, canvas.height * 0.55);

        // Terrain texture
        for (let i = 0; i < 200; i++) {
          ctx.fillStyle = `rgba(139, 69, 19, ${0.2 + Math.random() * 0.2})`;
          ctx.beginPath();
          ctx.arc(
            Math.random() * canvas.width,
            canvas.height * 0.45 + Math.random() * (canvas.height * 0.55),
            2 + Math.random() * 4,
            0, Math.PI * 2
          );
          ctx.fill();
        }

        // Distance markers
        for (let i = 0; i <= this.raceLength; i += 1000) {
          const x = 100 + i;
          ctx.fillStyle = 'rgba(255,215,0,0.4)';
          ctx.fillRect(x, 0, 4, canvas.height);
          ctx.fillStyle = '#FFD700';
          ctx.font = 'bold 22px Courier';
          ctx.fillText(`${(i/1000).toFixed(0)}km`, x + 10, 40);
        }

        // Finish line
        const finishX = 100 + this.raceLength;
        ctx.fillStyle = '#000';
        ctx.fillRect(finishX, 0, 100, canvas.height);
        for (let i = 0; i < 25; i++) {
          for (let j = 0; j < 2; j++) {
            if ((i + j) % 2 === 0) {
              ctx.fillStyle = '#fff';
              ctx.fillRect(finishX + (j * 50), i * (canvas.height/25), 50, canvas.height/25);
            }
          }
        }

        ctx.fillStyle = '#FFD700';
        ctx.font = 'bold 50px Courier';
        ctx.save();
        ctx.translate(finishX + 50, canvas.height / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText('FINISH', 0, 0);
        ctx.restore();
      },

      drawCamel(camel) {
        const ctx = this.ctx;
        const x = 100 + camel.distance;
        const y = camel.y;

        // Shadow
        ctx.fillStyle = 'rgba(0,0,0,0.25)';
        ctx.beginPath();
        ctx.ellipse(x + 45, y + 70, 50, 13, 0, 0, Math.PI * 2);
        ctx.fill();

        // Camel body
        ctx.fillStyle = camel.color;

        // Main body
        ctx.beginPath();
        ctx.ellipse(x + 45, y + 32, 55, 28, 0, 0, Math.PI * 2);
        ctx.fill();

        // Neck
        ctx.beginPath();
        ctx.ellipse(x + 78, y + 12, 17, 33, 0.3, 0, Math.PI * 2);
        ctx.fill();

        // Head
        ctx.beginPath();
        ctx.ellipse(x + 88, y - 3, 14, 17, 0.2, 0, Math.PI * 2);
        ctx.fill();

        // Humps
        ctx.beginPath();
        ctx.arc(x + 33, y + 17, 20, Math.PI, 0);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 60, y + 17, 16, Math.PI, 0);
        ctx.fill();

        // Animated legs
        const legMove = Math.sin(camel.distance * 0.08) * 6;
        ctx.fillRect(x + 18, y + 55, 9, 28 + legMove);
        ctx.fillRect(x + 40, y + 55, 9, 28 - legMove);
        ctx.fillRect(x + 62, y + 55, 9, 28 - legMove);
        ctx.fillRect(x + 84, y + 55, 9, 28 + legMove);

        // Jockey
        ctx.font = '42px Arial';
        ctx.fillText(camel.jockey, x + 38, y + 38);

        // Highlight player's camel
        if (camel.isMe) {
          ctx.strokeStyle = '#FFD700';
          ctx.lineWidth = 6;
          ctx.strokeRect(x - 15, y - 35, 115, 125);

          ctx.fillStyle = '#FFD700';
          ctx.font = 'bold 18px Courier';
          ctx.fillText('‚≠ê YOU ‚≠ê', x + 15, y - 40);
        }

        // Name
        ctx.fillStyle = '#FFF';
        ctx.font = 'bold 15px Courier';
        ctx.strokeStyle = '#000';
        ctx.lineWidth = 3;
        ctx.strokeText(camel.name, x + 5, y - 15);
        ctx.fillText(camel.name, x + 5, y - 15);
      },

      animate() {
        if (!this.running) return;

        const now = performance.now();
        const delta = Math.min((now - this.lastUpdate) / 16.67, 2); // Cap at 2x for lag
        this.lastUpdate = now;

        this.drawScene();

        let winner = null;

        this.camels.forEach(camel => {
          // COMPLETELY RANDOM SPEED CALCULATION!
          const randomFactor = 0.7 + Math.random() * 0.6; // 0.7-1.3
          const formFactor = 0.85 + (camel.form * 0.3); // 0.85-1.15
          const staminaFactor = Math.max(0.65, camel.stamina / 100);
          const consistencyFactor = 0.9 + (camel.consistency * 0.2); // 0.9-1.1

          camel.speed = camel.baseSpeed * randomFactor * formFactor * staminaFactor * consistencyFactor * delta;

          // Random events
          if (Math.random() < 0.008) camel.speed *= 1.9; // Burst!
          if (Math.random() < 0.004) camel.speed *= 0.4; // Stumble!

          camel.stamina -= camel.staminaDrain;
          camel.stamina = Math.max(15, Math.min(camel.maxStamina, camel.stamina));

          camel.distance += camel.speed;

          this.drawCamel(camel);

          if (camel.distance >= this.raceLength && !winner) {
            winner = camel;
          }
        });

        // Camera follows player
        this.cameraX = Math.max(0, Math.min(
          this.canvas.width - this.viewport.clientWidth,
          this.myCamel.distance - (this.viewport.clientWidth / 3)
        ));
        this.canvas.style.transform = `translateX(-${this.cameraX}px)`;

        // Update UI
        this.updateUI();

        if (winner) {
          this.finishRace(winner);
        } else {
          requestAnimationFrame(() => this.animate());
        }
      },

      updateUI() {
        const sorted = [...this.camels].sort((a, b) => b.distance - a.distance);
        const myPos = sorted.findIndex(c => c.isMe) + 1;
        const progress = ((this.myCamel.distance / this.raceLength) * 100);

        document.getElementById('myPosition').textContent = `${myPos} / 9`;
        document.getElementById('progressFill').style.width = `${Math.min(100, progress)}%`;
        document.getElementById('distanceText').textContent = `${(this.myCamel.distance/1000).toFixed(2)}km`;

        const list = document.getElementById('positionsList');
        list.innerHTML = sorted.map((c, i) => {
          const pct = ((c.distance / this.raceLength) * 100).toFixed(1);
          const medal = i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : `${i+1}.`;

          return `
            <div class="position-item ${c.isMe ? 'me' : ''}">
              <span><strong>${medal}</strong> ${c.jockey} ${c.name}</span>
              <span style="color: #32CD32;">${pct}%</span>
            </div>
          `;
        }).join('');
      },

      finishRace(winner) {
        this.running = false;

        const sorted = [...this.camels].sort((a, b) => b.distance - a.distance);
        const myPos = sorted.findIndex(c => c.isMe) + 1;

        let msg = '';
        if (winner.isMe) {
          msg = 'üèÜ YOU WON! üèÜ';
        } else if (myPos === 2) {
          msg = 'ü•à 2nd PLACE! ü•à';
        } else if (myPos === 3) {
          msg = 'ü•â 3rd PLACE! ü•â';
        } else {
          msg = `POSITION ${myPos} / 9`;
        }

        document.getElementById('resultText').textContent = msg;
        document.getElementById('raceResult').style.display = 'block';
      }
    };
  </script>
</body>
</html>
